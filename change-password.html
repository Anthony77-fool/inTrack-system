<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Change Password</title>

  <!-- FAVICON -->
  <link rel="icon" type="image/png" href="images/inac-logo.png">

  <!--Bootstrap link-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

  <!-- BS ICONS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

  <!--CDN for QRCode generator-->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.0/build/qrcode.min.js"></script>

  <!--CDN for Webcam HTML5 -->
  <script src="https://unpkg.com/html5-qrcode"></script>

  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- CUSTOM GOOGLE FONTS: Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Loved+by+the+King&family=Over+the+Rainbow&family=Roboto:ital,wght@0,100..900;1,100..900&family=Unkempt:wght@400;700&display=swap" rel="stylesheet">

  <!-- Google Font Link for Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">

  <!-- FontAwesome Icons -->
  <script src="https://kit.fontawesome.com/da97a1e785.js" crossorigin="anonymous"></script>

  <!-- CUSTOM CSS CLasses -->
  <link rel="stylesheet" href="css/customClasses.css">
  <link rel="stylesheet" href="css/classManagementStle.css">
  <link rel="stylesheet" href="css/tooltipStyle.css">
  <link rel="stylesheet" href="css/verify_Email.css">

  <!-- 404 Error Page -->
  <link rel="stylesheet" href="css/pageErrorStyle.css">

</head>
<body class="d-flex flex-row">

  <!-- PICTURE Section -->
  <section class="w-50 d-flex-center position-fixed" id="picture_Section">
    <picture>
      <img src="images/Security-bro.png" alt="" class="w-100">
    </picture>
  </section>

  <!-- Verify Email Address Section -->
  <section class="w-50 d-flex flex-column gap-4" id="email_Section" style="margin-left: 50%;">

    <header>
      <picture>
        <img src="images/inTrack-logo.jpg" alt="This is INtrACK Logo" class="w-50">
      </picture>
    </header>

    <!-- Top Text -->
    <div class="d-flex-center flex-column">
      <h2 class="cstm-lttr-spcng text-info-emphasis">Verify Email Address</h2>
      <h6 class="text-secondary">Please enter your email address</h6>
    </div>
    
    <!-- For Email Address -->
    <div class="d-flex flex-column align-items-center w-100">
      <div class="w-50">
        <label for="email-input" class="form-label">Email</label>
        <input type="email" id="change-pass-email-input" placeholder="Enter your Email" class="form-control">
        <div id="email-feedback" class="invalid-feedback">Please enter a valid email address.</div>
      </div>
    </div>
    
    <!-- For New Password -->
    <div class="d-flex flex-column align-items-center w-100 d-none" id="change-pass-newPassSection">
      <div class="w-50">
        <label for="new-password" class="form-label">New Password</label>
        <div class="position-relative">
          <input type="password" id="new-password" placeholder="Enter your New Password" class="form-control pr-5">
          <i class="fa-solid fa-eye text-secondary toggle-password" data-target="#new-password"></i>
        </div>
      </div>
    </div>

    <!-- For Confirm Password -->
    <div class="d-flex flex-column align-items-center w-100 d-none" id="change-pass-confirmPassSection">
      <div class="w-50">
        <label for="confirm-password" class="form-label">Confirm Password</label>
        <div class="position-relative">
          <input type="password" id="confirm-password" placeholder="Confirm your Password" class="form-control pr-5">
          <i class="fa-solid fa-eye text-secondary toggle-password" data-target="#confirm-password"></i>
        </div>
        <div id="password-feedback" class="invalid-feedback">Please enter the correct password.</div>
      </div>
    </div>


    <div class="d-flex-center w-100 d-none" id="change-pass-btnSection">
      <button class="btn btn-success w-50 cstm-lttr-spcng fw-bold fs-5" id="change-pass-btn">Change Password</button>
    </div>

    <div class="d-flex-center w-100">
      <button class="btn btn-success w-50 cstm-lttr-spcng fw-bold fs-5" id="change-pass-sendVerificationBtn">Send Verification Code</button>
    </div>

    <!-- User Notice -->
    <div class="w-100 d-flex-center text-secondary small pt-3">
      <p class="w-50 text-center">
        Verifying your email ensures the security of your account and allows us to send you important updates.
        Please complete this step before proceeding with changing your password.
      </p>
    </div>

  </section>

  <!-- Email Verification Modal -->
  <div class="modal fade" id="emailVerifyModal" tabindex="-1" aria-labelledby="emailVerifyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header d-flex justify-content-between">
          <h5 class="modal-title text-info-emphasis fs-2" id="emailVerifyModalLabel">Verification Code</h5>
          <i class="fa-solid fa-circle-xmark cursor-pointer fs-1" id="exit_Modal-icon" data-bs-dismiss="modal" title="Exit Form"></i><!-- ICON for exiting modal -->
        </div>

        <div class="modal-body">
          <p class="mb-2">Weâ€™ve sent a verification code to your email address. Please enter the 6-digit code below:</p>
          
          <div class="d-flex justify-content-center gap-2 mb-3" id="otpInputs">
            <input type="text" maxlength="1" class="otp-box text-success" />
            <input type="text" maxlength="1" class="otp-box text-success" />
            <input type="text" maxlength="1" class="otp-box text-success" />
            <input type="text" maxlength="1" class="otp-box text-success" />
            <input type="text" maxlength="1" class="otp-box text-success" />
            <input type="text" maxlength="1" class="otp-box text-success" />
          </div>

          <div class="text-center text-muted mb-2">
            Code expires in <span id="timer">01:00</span>
          </div>

          <div class="text-center">
            <button class="btn btn-link text-decoration-none p-0" id="change-pass-resendBtn" disabled>Resend Code</button>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-success" id="change-pass-verify-btn">Verify</button>
        </div>

      </div>
    </div>
  </div>

  <!-- Incorrect Code Modal (new) -->
  <div class="modal fade" id="incorrectCodeModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content text-center p-3">
        <div class="modal-body">
          <p class="text-danger fs-5 fw-semibold">Incorrect verification code. Please try again.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="js/send_emailVerification.js"></script>
  <script src="js/change-password.js"></script>

</body>
</html>